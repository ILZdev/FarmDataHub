<!DOCTYPE html>
<html lang="id" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dokumentasi Pertumbuhan Tanaman</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="/_sdk/element_sdk.js"></script>
    <style>
      body {
        box-sizing: border-box;
      }

      .video-container {
        position: relative;
        width: 100%;
        height: 200px;
        background: #f3f4f6;
        border-radius: 8px;
        overflow: hidden;
      }

      .video-container iframe {
        width: 100%;
        height: 100%;
        border: none;
      }

      .media-item {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .media-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .filter-button {
        transition: all 0.2s ease;
      }

      .filter-button.active {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }
    </style>
    <style>
      @view-transition {
        navigation: auto;
      }
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  </head>
  <body class="h-full bg-gradient-to-br from-green-50 to-blue-50 font-sans">
    <div class="min-h-full">
      <!-- Header -->
      <header class="bg-white shadow-lg border-b-4 border-green-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
          <div class="text-center">
            <h1 id="site-title" class="text-4xl font-bold text-gray-900 mb-2">
              Dokumentasi Pertumbuhan Tanaman
            </h1>
            <p id="site-description" class="text-lg text-gray-600">
              Sistem dokumentasi untuk memantau pertumbuhan komoditas pertanian
            </p>
          </div>
        </div>
      </header>
      <!-- Controls -->
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
          <!-- Commodity Filter -->
          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Pilih Komoditas:</label
            >
            <div class="flex flex-wrap gap-3">
              <button
                id="commodity-all"
                class="filter-button px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 active"
              >
                Semua Komoditas
              </button>
              <button
                id="commodity-timun"
                class="filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"
              >
                ğŸ¥’ Timun
              </button>
              <button
                id="commodity-bawang"
                class="filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"
              >
                ğŸ§… Bawang Merah
              </button>
              <button
                id="commodity-cabai"
                class="filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"
              >
                ğŸŒ¶ï¸ Cabai
              </button>
              <button
                id="commodity-tomat"
                class="filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"
              >
                ğŸ… Tomat
              </button>
            </div>
          </div>
          <!-- Time Period Filter -->
          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Filter Periode:</label
            >
            <div class="flex flex-wrap gap-3">
              <button
                id="period-all"
                class="filter-button px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 active"
              >
                Semua Periode
              </button>
              <button
                id="period-daily"
                class="filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"
              >
                ğŸ“… Harian
              </button>
              <button
                id="period-weekly"
                class="filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"
              >
                ğŸ“Š Mingguan
              </button>
              <button
                id="period-monthly"
                class="filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300"
              >
                ğŸ“ˆ Bulanan
              </button>
            </div>
          </div>
          <!-- Calendar Filter -->
          <div class="mb-6">
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >ğŸ“… Filter Tanggal:</label
            >
            <div class="flex flex-wrap gap-4 items-center">
              <div>
                <label class="block text-xs text-gray-500 mb-1"
                  >Dari Tanggal:</label
                >
                <input
                  type="date"
                  id="date-from"
                  class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <div>
                <label class="block text-xs text-gray-500 mb-1"
                  >Sampai Tanggal:</label
                >
                <input
                  type="date"
                  id="date-to"
                  class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                />
              </div>
              <button
                id="clear-date"
                class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 text-sm font-medium mt-4"
              >
                Reset Tanggal
              </button>
            </div>
          </div>
          <!-- Navigation -->
          <div id="navigation-container" class="hidden">
            <label class="block text-sm font-semibold text-gray-700 mb-3"
              >Navigasi:</label
            >
            <div id="navigation-buttons" class="flex flex-wrap gap-2"></div>
          </div>
        </div>
        <!-- Media Grid -->
        <div
          id="media-grid"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"
        >
          <!-- Media items will be populated by JavaScript -->
        </div>
        <!-- No Results Message -->
        <div id="no-results" class="hidden text-center py-12">
          <div class="bg-white rounded-xl shadow-lg p-8">
            <div class="text-6xl mb-4">ğŸ”</div>
            <h3 class="text-xl font-semibold text-gray-700 mb-2">
              Tidak Ada Dokumentasi
            </h3>
            <p class="text-gray-500">
              Tidak ditemukan dokumentasi untuk filter yang dipilih.
            </p>
          </div>
        </div>
      </div>
      <!-- Modal Popup -->
      <div
        id="modal-overlay"
        class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4"
      >
        <div
          class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] flex flex-col"
        >
          <!-- Modal Header -->
          <div
            class="flex items-center justify-between p-6 border-b border-gray-200"
          >
            <h3 id="modal-title" class="text-xl font-bold text-gray-900"></h3>
            <button
              id="close-modal"
              class="text-gray-400 hover:text-gray-600 text-2xl font-bold"
            >
              âœ•
            </button>
          </div>
          <!-- Modal Content -->
          <div class="flex-1 overflow-y-auto p-6">
            <div id="modal-content" class="space-y-4">
              <!-- Content will be populated by JavaScript -->
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      // Sample data structure - in real implementation, this would be generated from actual file system
      const mediaData = {
        timun: [
          {
            file: "2025-01-01.jpg",
            date: "2025-01-01",
            type: "image",
            url: "https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=300&fit=crop",
            title: "Penanaman Benih Timun Hari Pertama",
            description:
              "Dokumentasi penanaman benih timun varietas hibrida pada media tanam yang telah disiapkan. Benih ditanam dengan kedalaman 2-3 cm dan jarak tanam 30x40 cm. Kondisi tanah dalam keadaan lembab dengan pH 6.0-6.8. Suhu lingkungan sekitar 25-30Â°C dengan kelembaban udara 70-80%. Penyiraman dilakukan secara hati-hati untuk menjaga kelembaban tanah tanpa menyebabkan genangan air.",
            weather: "Cerah, 28Â°C",
            notes:
              "Semua benih berhasil ditanam dengan baik. Tidak ada kendala selama proses penanaman.",
          },
          {
            file: "2025-01-02.mp4",
            date: "2025-01-02",
            type: "video",
            url: "https://www.youtube.com/embed/dQw4w9WgXcQ",
            title: "Penyiraman dan Perawatan Hari Kedua",
            description:
              "Video dokumentasi penyiraman rutin pada hari kedua setelah penanaman. Penyiraman dilakukan pada pagi hari menggunakan sprayer halus untuk menghindari erosi tanah. Pemeriksaan kondisi media tanam dan tanda-tanda perkecambahan awal. Suhu tanah diukur dan dijaga pada kisaran optimal 24-26Â°C.",
            weather: "Berawan, 26Â°C",
            notes:
              "Tanah masih dalam kondisi lembab yang baik. Belum terlihat tanda perkecambahan.",
          },
          {
            file: "2025-01-03.jpg",
            date: "2025-01-03",
            type: "image",
            url: "https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=400&h=300&fit=crop",
            title: "Perkecambahan Pertama Terlihat",
            description:
              "Dokumentasi munculnya kecambah pertama pada hari ketiga. Terlihat kotiledon mulai muncul dari permukaan tanah dengan warna hijau muda yang segar. Tinggi kecambah sekitar 1-2 cm. Kondisi perkecambahan sangat baik dengan tingkat keberhasilan mencapai 85%. Media tanam tetap dijaga kelembabannya dan mulai diberikan naungan parsial untuk melindungi kecambah muda.",
            weather: "Cerah, 29Â°C",
            notes:
              "Perkecambahan berjalan sesuai ekspektasi. Perlu monitoring intensif untuk minggu pertama.",
          },
          {
            file: "2025-01-08.jpg",
            date: "2025-01-08",
            type: "image",
            url: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop",
            title: "Pertumbuhan Minggu Pertama",
            description:
              "Dokumentasi pertumbuhan tanaman timun pada akhir minggu pertama. Tanaman telah mencapai tinggi 8-10 cm dengan 2-3 helai daun sejati yang mulai terbentuk. Sistem perakaran berkembang dengan baik. Mulai dilakukan penyulaman pada area yang gagal tumbuh. Pemberian pupuk organik cair dengan konsentrasi rendah dimulai untuk mendukung pertumbuhan vegetatif.",
            weather: "Cerah, 27Â°C",
            notes:
              "Pertumbuhan sangat memuaskan. Tidak ada serangan hama atau penyakit yang terdeteksi.",
          },
          {
            file: "2025-01-15.mp4",
            date: "2025-01-15",
            type: "video",
            url: "https://www.youtube.com/embed/jNQXAC9IVRw",
            title: "Pemasangan Ajir dan Pemupukan",
            description:
              "Video dokumentasi pemasangan ajir bambu setinggi 2 meter untuk mendukung pertumbuhan tanaman timun yang mulai merambat. Dilakukan juga pemupukan dengan NPK 16-16-16 sebanyak 5 gram per tanaman. Pengikatan batang utama ke ajir menggunakan tali rafia dengan teknik yang tidak melukai tanaman. Pemangkasan tunas air dan daun tua yang sudah menguning.",
            weather: "Berawan, 25Â°C",
            notes:
              "Semua tanaman berhasil dipasang ajir. Respons tanaman terhadap pemupukan sangat baik.",
          },
          {
            file: "2025-02-01.jpg",
            date: "2025-02-01",
            type: "image",
            url: "https://images.unsplash.com/photo-1461354464878-ad92f492a5a0?w=400&h=300&fit=crop",
            title: "Pembungaan dan Pembentukan Buah",
            description:
              "Dokumentasi fase pembungaan pada minggu keempat. Terlihat bunga jantan dan betina mulai bermunculan dengan jumlah yang seimbang. Bunga betina ditandai dengan adanya bakal buah kecil di pangkalnya. Dilakukan penyerbukan manual untuk meningkatkan tingkat keberhasilan pembentukan buah. Intensitas penyiraman ditingkatkan karena kebutuhan air yang meningkat pada fase generatif.",
            weather: "Cerah, 30Â°C",
            notes:
              "Pembungaan berlangsung normal. Mulai terlihat buah muda berukuran 2-3 cm.",
          },
        ],
        bawang: [
          {
            file: "2025-01-01.jpg",
            date: "2025-01-01",
            type: "image",
            url: "https://images.unsplash.com/photo-1618512496248-a07fe83aa8cb?w=400&h=300&fit=crop",
            title: "Persiapan Lahan dan Penanaman Bibit",
            description:
              "Dokumentasi persiapan lahan untuk penanaman bawang merah dengan sistem bedengan. Lahan telah diolah dengan traktor dan dibuat bedengan dengan lebar 1.2 meter dan tinggi 30 cm. Jarak antar bedengan 40 cm untuk memudahkan akses perawatan. Bibit bawang merah varietas Bima Brebes ditanam dengan jarak 15x20 cm. Setiap lubang tanam diberi pupuk kandang yang telah matang.",
            weather: "Cerah, 32Â°C",
            notes:
              "Kondisi tanah sangat baik dengan drainase yang optimal. Semua bibit tertanam dengan sempurna.",
          },
          {
            file: "2025-01-02.mp4",
            date: "2025-01-02",
            type: "video",
            url: "https://www.youtube.com/embed/Me-VhC9ieh0",
            title: "Sistem Irigasi Tetes dan Mulsa",
            description:
              "Video pemasangan sistem irigasi tetes untuk efisiensi penggunaan air dan pemasangan mulsa plastik hitam perak untuk menekan pertumbuhan gulma serta menjaga kelembaban tanah. Sistem irigasi diatur dengan timer otomatis untuk penyiraman 3 kali sehari selama 15 menit. Mulsa dipasang dengan rapi dan diberi lubang sesuai jarak tanam yang telah ditentukan.",
            weather: "Berawan, 28Â°C",
            notes:
              "Sistem irigasi berfungsi dengan baik. Mulsa terpasang sempurna tanpa ada yang sobek.",
          },
          {
            file: "2025-01-03.jpg",
            date: "2025-01-03",
            type: "image",
            url: "https://images.unsplash.com/photo-1508747703725-719777637510?w=400&h=300&fit=crop",
            title: "Pertumbuhan Awal dan Adaptasi",
            description:
              "Dokumentasi pertumbuhan awal bawang merah pada hari ketiga setelah tanam. Bibit menunjukkan tanda-tanda adaptasi yang baik dengan daun yang tetap hijau dan tegak. Tidak terlihat gejala stress atau layu pada tanaman. Kelembaban tanah terjaga dengan baik berkat sistem irigasi tetes dan mulsa. Suhu tanah stabil pada kisaran 25-28Â°C yang optimal untuk pertumbuhan akar.",
            weather: "Cerah, 31Â°C",
            notes:
              "Tingkat keberhasilan hidup bibit mencapai 95%. Sangat memuaskan untuk hari ketiga.",
          },
          {
            file: "2025-01-09.jpg",
            date: "2025-01-09",
            type: "image",
            url: "https://images.unsplash.com/photo-1582515073490-39981397c445?w=400&h=300&fit=crop",
            title: "Pertumbuhan Vegetatif Minggu Pertama",
            description:
              "Dokumentasi pertumbuhan vegetatif pada akhir minggu pertama. Tanaman bawang merah menunjukkan pertumbuhan yang sangat baik dengan tinggi rata-rata 12-15 cm. Daun berwarna hijau segar dan jumlah anakan mulai bertambah. Dilakukan pemupukan susulan pertama dengan pupuk NPK 16-16-16 sebanyak 3 gram per rumpun. Penyiangan gulma dilakukan secara manual di area yang tidak tertutup mulsa.",
            weather: "Cerah, 29Â°C",
            notes:
              "Pertumbuhan sesuai target. Mulai terlihat pembentukan anakan pada beberapa rumpun.",
          },
          {
            file: "2025-01-16.mp4",
            date: "2025-01-16",
            type: "video",
            url: "https://www.youtube.com/embed/kJQP7kiw5Fk",
            title: "Pemupukan dan Pengendalian Hama",
            description:
              "Video dokumentasi pemupukan kedua dan aplikasi pestisida organik untuk pencegahan hama thrips dan ulat bawang. Pemupukan menggunakan pupuk majemuk dengan kandungan kalium tinggi untuk mendukung pembentukan umbi. Penyemprotan pestisida organik berbahan dasar neem oil dilakukan pada sore hari untuk menghindari fitotoksisitas. Monitoring intensif terhadap gejala serangan hama dan penyakit.",
            weather: "Berawan, 27Â°C",
            notes:
              "Tidak ditemukan serangan hama yang signifikan. Tanaman dalam kondisi sehat.",
          },
          {
            file: "2025-02-01.jpg",
            date: "2025-02-01",
            type: "image",
            url: "https://images.unsplash.com/photo-1553395572-0b35c9d6e4b7?w=400&h=300&fit=crop",
            title: "Pembentukan Umbi dan Pematangan",
            description:
              "Dokumentasi fase pembentukan umbi pada minggu keempat. Terlihat jelas pembengkakan pada pangkal batang yang menandakan pembentukan umbi telah dimulai. Daun mulai menguning secara alami sebagai tanda tanaman memasuki fase pematangan. Pengurangan frekuensi penyiraman dilakukan untuk mencegah pembusukan umbi. Persiapan untuk panen dimulai dengan pengecekan ukuran dan kepadatan umbi.",
            weather: "Cerah, 33Â°C",
            notes:
              "Pembentukan umbi sangat baik. Diperkirakan siap panen dalam 2-3 minggu.",
          },
        ],
        cabai: [
          {
            file: "2025-01-01.jpg",
            date: "2025-01-01",
            type: "image",
            url: "https://images.unsplash.com/photo-1583454110551-21f2fa2afe61?w=400&h=300&fit=crop",
            title: "Transplantasi Bibit Cabai ke Lahan",
            description:
              "Dokumentasi proses transplantasi bibit cabai rawit varietas Dewata yang telah berumur 4 minggu dari persemaian ke lahan produksi. Bibit dipilih yang sehat dengan tinggi 10-12 cm dan memiliki 4-6 helai daun sejati. Penanaman dilakukan pada sore hari untuk mengurangi stress transplantasi. Jarak tanam 50x60 cm dengan sistem double row. Setiap lubang tanam diberi pupuk kandang 200 gram dan kapur dolomit 50 gram.",
            weather: "Berawan, 26Â°C",
            notes:
              "Semua bibit berhasil ditransplantasi. Kondisi bibit sangat sehat dan vigor.",
          },
          {
            file: "2025-01-02.mp4",
            date: "2025-01-02",
            type: "video",
            url: "https://www.youtube.com/embed/LDU_Txk06tM",
            title: "Pemasangan Naungan dan Sistem Pengairan",
            description:
              "Video pemasangan paranet 50% untuk memberikan naungan parsial pada tanaman cabai muda dan instalasi sistem pengairan sprinkler. Naungan dipasang setinggi 3 meter untuk memberikan ruang pertumbuhan yang cukup. Sistem sprinkler diatur dengan pola penyiraman otomatis 4 kali sehari selama 10 menit. Pemasangan juga dilengkapi dengan sensor kelembaban tanah untuk mengoptimalkan jadwal penyiraman.",
            weather: "Cerah, 30Â°C",
            notes:
              "Sistem naungan dan irigasi berfungsi optimal. Tanaman terlihat lebih segar.",
          },
          {
            file: "2025-01-04.jpg",
            date: "2025-01-04",
            type: "image",
            url: "https://images.unsplash.com/photo-1525207934214-58dd3b498dd4?w=400&h=300&fit=crop",
            title: "Adaptasi dan Pertumbuhan Awal",
            description:
              "Dokumentasi adaptasi tanaman cabai pada hari keempat setelah transplantasi. Tanaman menunjukkan tanda-tanda adaptasi yang sangat baik dengan daun yang tetap hijau dan tidak layu. Mulai terlihat pertumbuhan tunas baru di ketiak daun. Sistem perakaran berkembang dengan baik yang ditandai dengan tanaman yang kokoh dan tidak mudah goyang. Dilakukan penyiraman tambahan secara manual pada tanaman yang terlihat stress.",
            weather: "Cerah, 28Â°C",
            notes:
              "Tingkat keberhasilan transplantasi 98%. Hanya 2 tanaman yang perlu diganti.",
          },
          {
            file: "2025-01-10.jpg",
            date: "2025-01-10",
            type: "image",
            url: "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop",
            title: "Pertumbuhan Vegetatif dan Pemangkasan",
            description:
              "Dokumentasi pertumbuhan vegetatif pada minggu kedua dengan tinggi tanaman mencapai 25-30 cm. Dilakukan pemangkasan tunas air dan cabang yang tumbuh di bawah percabangan utama untuk memusatkan energi pada pertumbuhan batang utama. Pemberian pupuk NPK 15-15-15 sebanyak 10 gram per tanaman. Pemasangan ajir bambu setinggi 1.5 meter untuk mendukung pertumbuhan tanaman yang semakin tinggi.",
            weather: "Berawan, 27Â°C",
            notes:
              "Respons tanaman terhadap pemangkasan sangat baik. Pertumbuhan lebih fokus ke atas.",
          },
          {
            file: "2025-01-17.mp4",
            date: "2025-01-17",
            type: "video",
            url: "https://www.youtube.com/embed/9bZkp7q19f0",
            title: "Pembungaan dan Pengendalian Hama Terpadu",
            description:
              "Video dokumentasi munculnya bunga pertama pada tanaman cabai dan implementasi pengendalian hama terpadu (PHT). Bunga pertama muncul pada percabangan ketiga dengan warna putih yang sempurna. Pemasangan perangkap kuning untuk mengendalikan thrips dan kutu daun. Aplikasi pestisida nabati berbahan dasar ekstrak mimba dan tembakau. Introduksi musuh alami seperti predator Menochilus sexmaculatus untuk mengendalikan aphid.",
            weather: "Cerah, 29Â°C",
            notes:
              "Pembungaan dimulai lebih awal dari perkiraan. Sistem PHT berjalan dengan baik.",
          },
          {
            file: "2025-02-02.jpg",
            date: "2025-02-02",
            type: "image",
            url: "https://images.unsplash.com/photo-1544047579-ac2ec8c0ef57?w=400&h=300&fit=crop",
            title: "Pembentukan Buah dan Panen Pertama",
            description:
              "Dokumentasi pembentukan buah cabai dan panen perdana pada minggu kelima. Buah cabai mulai terbentuk dengan ukuran 2-3 cm dan berwarna hijau muda. Beberapa buah sudah mencapai ukuran panen dengan panjang 8-10 cm dan mulai berwarna merah. Dilakukan panen selektif untuk buah yang sudah matang optimal. Produktivitas awal mencapai 200 gram per tanaman. Pemupukan dengan pupuk tinggi kalium untuk meningkatkan kualitas buah.",
            weather: "Cerah, 31Â°C",
            notes:
              "Panen pertama sangat memuaskan. Kualitas buah excellent dengan rasa pedas yang optimal.",
          },
        ],
        tomat: [
          {
            file: "2025-01-01.jpg",
            date: "2025-01-01",
            type: "image",
            url: "https://images.unsplash.com/photo-1592924357228-91a4daadcfea?w=400&h=300&fit=crop",
            title: "Penanaman Bibit Tomat Hidroponik",
            description:
              "Dokumentasi penanaman bibit tomat cherry varietas Servo dalam sistem hidroponik NFT (Nutrient Film Technique). Bibit berumur 3 minggu dengan tinggi 8-10 cm ditanam dalam rockwool yang telah dikondisioning. Sistem NFT diatur dengan kemiringan 1:30 dan flow rate 2 liter per menit. Larutan nutrisi AB mix dengan EC 1.8-2.0 dan pH 5.5-6.0. Greenhouse dilengkapi dengan sistem ventilasi otomatis dan kontrol suhu.",
            weather: "Terkontrol, 24Â°C",
            notes:
              "Semua sistem hidroponik berfungsi normal. Bibit beradaptasi dengan baik.",
          },
          {
            file: "2025-01-03.mp4",
            date: "2025-01-03",
            type: "video",
            url: "https://www.youtube.com/embed/PSH0eRKq1lE",
            title: "Monitoring Sistem dan Pertumbuhan Akar",
            description:
              "Video monitoring sistem hidroponik dan perkembangan sistem perakaran tomat pada hari ketiga. Akar putih bersih mulai berkembang keluar dari rockwool dan menyentuh larutan nutrisi. Sistem sirkulasi berjalan 24 jam dengan interval istirahat 15 menit setiap 4 jam. Monitoring pH dan EC dilakukan 3 kali sehari. Pembersihan filter dan pengecekan pompa dilakukan rutin. Suhu larutan nutrisi dijaga pada 18-22Â°C.",
            weather: "Terkontrol, 23Â°C",
            notes:
              "Sistem berjalan stabil. Akar berkembang sangat baik tanpa tanda-tanda stress.",
          },
          {
            file: "2025-01-05.jpg",
            date: "2025-01-05",
            type: "image",
            url: "https://images.unsplash.com/photo-1546470427-e26264be0b0d?w=400&h=300&fit=crop",
            title: "Pertumbuhan Vegetatif dan Pemasangan Tali",
            description:
              "Dokumentasi pertumbuhan vegetatif yang pesat pada hari kelima dengan tinggi tanaman mencapai 15-18 cm. Pemasangan tali rafia dari atas greenhouse ke pangkal tanaman untuk sistem tali gantung. Tanaman dililit secara spiral searah jarum jam setiap 2-3 ruas daun. Mulai terlihat pembentukan cabang lateral yang akan dipangkas untuk sistem single stem. Daun berwarna hijau tua yang menandakan nutrisi tercukupi dengan baik.",
            weather: "Terkontrol, 25Â°C",
            notes:
              "Pertumbuhan sangat cepat. Sistem tali gantung terpasang dengan sempurna.",
          },
          {
            file: "2025-01-11.jpg",
            date: "2025-01-11",
            type: "image",
            url: "https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=400&h=300&fit=crop",
            title: "Pemangkasan dan Pembentukan Tandan Bunga",
            description:
              "Dokumentasi pemangkasan tunas lateral dan munculnya tandan bunga pertama pada minggu kedua. Pemangkasan dilakukan pada pagi hari menggunakan pisau steril untuk mencegah infeksi. Tunas lateral dipangkas saat berukuran 3-5 cm. Tandan bunga pertama muncul setelah daun ke-7 dengan 6-8 kuntum bunga. Aplikasi hormon perangsang buah (auxin) untuk meningkatkan fruit set. Penyesuaian konsentrasi nutrisi untuk fase generatif.",
            weather: "Terkontrol, 26Â°C",
            notes:
              "Pembungaan tepat waktu. Semua tandan bunga berkembang dengan sempurna.",
          },
          {
            file: "2025-01-18.mp4",
            date: "2025-01-18",
            type: "video",
            url: "https://www.youtube.com/embed/hFZFjoX2cGg",
            title: "Penyerbukan dan Pembentukan Buah Muda",
            description:
              "Video proses penyerbukan manual menggunakan vibrator elektrik dan dokumentasi pembentukan buah muda. Penyerbukan dilakukan setiap pagi pada jam 8-10 saat kelembaban optimal. Buah muda mulai terbentuk dengan diameter 5-8 mm berwarna hijau muda. Pengaturan iklim mikro dengan kelembaban 60-70% dan suhu 24-28Â°C. Monitoring serangan hama thrips dan whitefly menggunakan perangkap biru dan kuning.",
            weather: "Terkontrol, 25Â°C",
            notes:
              "Tingkat fruit set mencapai 85%. Tidak ada serangan hama yang signifikan.",
          },
          {
            file: "2025-02-03.jpg",
            date: "2025-02-03",
            type: "image",
            url: "https://images.unsplash.com/photo-1607305387299-a3d9611cd469?w=400&h=300&fit=crop",
            title: "Pematangan Buah dan Panen Perdana",
            description:
              "Dokumentasi pematangan buah tomat cherry dan panen perdana pada minggu ketiga. Buah mulai berubah warna dari hijau ke orange dan merah dengan ukuran diameter 2-3 cm. Panen dilakukan pada pagi hari saat buah mencapai 80% matang untuk kualitas optimal. Produktivitas awal 150 gram per tanaman per minggu. Sortasi dan grading buah berdasarkan ukuran dan tingkat kematangan. Packaging menggunakan punnet plastik food grade.",
            weather: "Terkontrol, 24Â°C",
            notes:
              "Kualitas buah excellent dengan brix 6-8%. Panen perdana sangat memuaskan.",
          },
        ],
      };

      let currentCommodity = "all";
      let currentPeriod = "all";
      let currentNavigation = null;
      let dateFrom = null;
      let dateTo = null;

      // Default config for Element SDK
      const defaultConfig = {
        site_title: "Dokumentasi Pertumbuhan Tanaman",
        site_description:
          "Sistem dokumentasi untuk memantau pertumbuhan komoditas pertanian",
      };

      // Initialize Element SDK
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig: defaultConfig,
          onConfigChange: async (config) => {
            const titleElement = document.getElementById("site-title");
            const descElement = document.getElementById("site-description");

            if (titleElement) {
              titleElement.textContent =
                config.site_title || defaultConfig.site_title;
            }
            if (descElement) {
              descElement.textContent =
                config.site_description || defaultConfig.site_description;
            }
          },
          mapToCapabilities: (config) => ({
            recolorables: [],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined,
          }),
          mapToEditPanelValues: (config) =>
            new Map([
              ["site_title", config.site_title || defaultConfig.site_title],
              [
                "site_description",
                config.site_description || defaultConfig.site_description,
              ],
            ]),
        });
      }

      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString("id-ID", {
          weekday: "long",
          year: "numeric",
          month: "long",
          day: "numeric",
        });
      }

      function getWeekNumber(date) {
        const d = new Date(date);
        const yearStart = new Date(d.getFullYear(), 0, 1);
        const weekNumber = Math.ceil(
          ((d - yearStart) / 86400000 + yearStart.getDay() + 1) / 7
        );
        return weekNumber;
      }

      function getMonthNumber(date) {
        return new Date(date).getMonth() + 1;
      }

      function getDayOfMonth(date) {
        return new Date(date).getDate();
      }

      function getAvailableDays() {
        const filteredData = getBaseFilteredData();
        const dates = new Set();
        filteredData.forEach((item) => {
          dates.add(item.date);
        });
        return Array.from(dates).sort();
      }

      function getAvailableWeeks() {
        const filteredData = getBaseFilteredData();
        const weeks = new Set();
        filteredData.forEach((item) => {
          weeks.add(getWeekNumber(item.date));
        });
        return Array.from(weeks).sort((a, b) => a - b);
      }

      function getAvailableMonths() {
        const filteredData = getBaseFilteredData();
        const months = new Set();
        filteredData.forEach((item) => {
          months.add(getMonthNumber(item.date));
        });
        return Array.from(months).sort((a, b) => a - b);
      }

      function getBaseFilteredData() {
        let filteredData = [];

        // Get data based on commodity filter
        if (currentCommodity === "all") {
          Object.keys(mediaData).forEach((commodity) => {
            mediaData[commodity].forEach((item) => {
              filteredData.push({ ...item, commodity });
            });
          });
        } else {
          mediaData[currentCommodity].forEach((item) => {
            filteredData.push({ ...item, commodity: currentCommodity });
          });
        }

        // Apply date range filter
        if (dateFrom || dateTo) {
          filteredData = filteredData.filter((item) => {
            const itemDate = new Date(item.date);
            const fromDate = dateFrom ? new Date(dateFrom) : null;
            const toDate = dateTo ? new Date(dateTo) : null;

            if (fromDate && toDate) {
              return itemDate >= fromDate && itemDate <= toDate;
            } else if (fromDate) {
              return itemDate >= fromDate;
            } else if (toDate) {
              return itemDate <= toDate;
            }
            return true;
          });
        }

        return filteredData;
      }

      function showModal(item) {
        const modal = document.getElementById("modal-overlay");
        const modalTitle = document.getElementById("modal-title");
        const modalContent = document.getElementById("modal-content");

        const commodityNames = {
          timun: "ğŸ¥’ Timun",
          bawang: "ğŸ§… Bawang Merah",
          cabai: "ğŸŒ¶ï¸ Cabai",
          tomat: "ğŸ… Tomat",
        };

        modalTitle.textContent = item.title;

        let mediaHtml = "";
        if (item.type === "video") {
          mediaHtml = `
                    <div class="video-container mb-6">
                        <iframe src="${item.url}" allowfullscreen class="w-full h-64 rounded-lg"></iframe>
                    </div>
                `;
        } else {
          mediaHtml = `
                    <div class="mb-6">
                        <img src="${item.url}" alt="${item.title}" 
                             class="w-full h-64 object-cover rounded-lg shadow-lg"
                             onerror="this.src=''; this.alt='Gambar gagal dimuat'; this.style.display='none';">
                    </div>
                `;
        }

        modalContent.innerHTML = `
                ${mediaHtml}
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-2">ğŸ“‹ Informasi Dasar</h4>
                        <div class="space-y-2 text-sm">
                            <div><span class="font-medium">Komoditas:</span> ${
                              commodityNames[item.commodity]
                            }</div>
                            <div><span class="font-medium">Tanggal:</span> ${formatDate(
                              item.date
                            )}</div>
                            <div><span class="font-medium">File:</span> ${
                              item.file
                            }</div>
                            <div><span class="font-medium">Tipe:</span> ${
                              item.type === "video" ? "ğŸ“¹ Video" : "ğŸ“· Foto"
                            }</div>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-2">ğŸŒ¤ï¸ Kondisi Lingkungan</h4>
                        <div class="space-y-2 text-sm">
                            <div><span class="font-medium">Cuaca:</span> ${
                              item.weather
                            }</div>
                        </div>
                    </div>
                </div>

                <div class="bg-green-50 p-4 rounded-lg mb-6">
                    <h4 class="font-semibold text-gray-800 mb-3">ğŸ“ Deskripsi Lengkap</h4>
                    <p class="text-gray-700 leading-relaxed">${
                      item.description
                    }</p>
                </div>

                <div class="bg-yellow-50 p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-800 mb-3">ğŸ’¡ Catatan Lapangan</h4>
                    <p class="text-gray-700 leading-relaxed">${item.notes}</p>
                </div>
            `;

        modal.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      }

      function closeModal() {
        const modal = document.getElementById("modal-overlay");
        modal.classList.add("hidden");
        document.body.style.overflow = "auto";
      }

      function filterData() {
        let filteredData = getBaseFilteredData();

        // Apply period and navigation filters
        if (currentPeriod !== "all" && currentNavigation !== null) {
          filteredData = filteredData.filter((item) => {
            if (currentPeriod === "daily") {
              return item.date === currentNavigation;
            } else if (currentPeriod === "weekly") {
              const weekNum = getWeekNumber(item.date);
              return weekNum === currentNavigation;
            } else if (currentPeriod === "monthly") {
              const monthNum = getMonthNumber(item.date);
              return monthNum === currentNavigation;
            }

            return true;
          });
        }

        return filteredData.sort((a, b) => new Date(b.date) - new Date(a.date));
      }

      function updateNavigation() {
        const navigationContainer = document.getElementById(
          "navigation-container"
        );
        const navigationButtons = document.getElementById("navigation-buttons");

        if (currentPeriod === "all") {
          navigationContainer.classList.add("hidden");
          currentNavigation = null;
          return;
        }

        navigationContainer.classList.remove("hidden");
        navigationButtons.innerHTML = "";

        let availableValues = [];
        let labelPrefix = "";

        if (currentPeriod === "daily") {
          availableValues = getAvailableDays();

          // Create buttons for daily navigation with proper date formatting
          availableValues.forEach((dateValue, index) => {
            const btn = document.createElement("button");
            btn.className =
              "px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors";
            btn.textContent = `Hari ${index + 1} (${new Date(
              dateValue
            ).getDate()}/${new Date(dateValue).getMonth() + 1})`;
            btn.onclick = () => {
              currentNavigation = dateValue;
              updateNavigationButtons();
              renderMedia();
            };
            navigationButtons.appendChild(btn);
          });

          // Set first button as active by default
          if (availableValues.length > 0) {
            currentNavigation = availableValues[0];
            updateNavigationButtons();
          }
          return;
        } else if (currentPeriod === "weekly") {
          availableValues = getAvailableWeeks();
          labelPrefix = "Minggu";
        } else if (currentPeriod === "monthly") {
          availableValues = getAvailableMonths();
          const monthNames = [
            "",
            "Januari",
            "Februari",
            "Maret",
            "April",
            "Mei",
            "Juni",
            "Juli",
            "Agustus",
            "September",
            "Oktober",
            "November",
            "Desember",
          ];

          availableValues.forEach((monthNum) => {
            const btn = document.createElement("button");
            btn.className =
              "px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors";
            btn.textContent = monthNames[monthNum];
            btn.onclick = () => {
              currentNavigation = monthNum;
              updateNavigationButtons();
              renderMedia();
            };
            navigationButtons.appendChild(btn);
          });

          // Set first button as active by default
          if (availableValues.length > 0) {
            currentNavigation = availableValues[0];
            updateNavigationButtons();
          }
          return;
        }

        // For daily and weekly navigation
        availableValues.forEach((value) => {
          const btn = document.createElement("button");
          btn.className =
            "px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors";
          btn.textContent = `${labelPrefix} ${value}`;
          btn.onclick = () => {
            currentNavigation = value;
            updateNavigationButtons();
            renderMedia();
          };
          navigationButtons.appendChild(btn);
        });

        // Set first button as active by default
        if (availableValues.length > 0) {
          currentNavigation = availableValues[0];
          updateNavigationButtons();
        }
      }

      function updateNavigationButtons() {
        const buttons = document.querySelectorAll("#navigation-buttons button");
        buttons.forEach((btn) => {
          // Check if this button corresponds to the current navigation
          let isActive = false;

          if (currentPeriod === "daily") {
            // For daily, check if the button's onclick function matches current navigation
            const btnText = btn.textContent;
            const availableDays = getAvailableDays();
            availableDays.forEach((dateValue, index) => {
              const expectedText = `Hari ${index + 1} (${new Date(
                dateValue
              ).getDate()}/${new Date(dateValue).getMonth() + 1})`;
              if (btnText === expectedText && dateValue === currentNavigation) {
                isActive = true;
              }
            });
          } else if (currentPeriod === "weekly") {
            const btnText = btn.textContent;
            if (btnText.includes(`Minggu ${currentNavigation}`)) {
              isActive = true;
            }
          } else if (currentPeriod === "monthly") {
            const monthNames = [
              "",
              "Januari",
              "Februari",
              "Maret",
              "April",
              "Mei",
              "Juni",
              "Juli",
              "Agustus",
              "September",
              "Oktober",
              "November",
              "Desember",
            ];
            if (btn.textContent === monthNames[currentNavigation]) {
              isActive = true;
            }
          }

          if (isActive) {
            btn.className =
              "px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors";
          } else {
            btn.className =
              "px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors";
          }
        });
      }

      function renderMedia() {
        const grid = document.getElementById("media-grid");
        const noResults = document.getElementById("no-results");
        const filteredData = filterData();

        if (filteredData.length === 0) {
          grid.innerHTML = "";
          noResults.classList.remove("hidden");
          return;
        }

        noResults.classList.add("hidden");

        grid.innerHTML = filteredData
          .map((item) => {
            const commodityNames = {
              timun: "ğŸ¥’ Timun",
              bawang: "ğŸ§… Bawang Merah",
              cabai: "ğŸŒ¶ï¸ Cabai",
              tomat: "ğŸ… Tomat",
            };

            if (item.type === "video") {
              return `
                        <div class="media-item bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer" onclick="showModal(${JSON.stringify(
                          item
                        ).replace(/"/g, "&quot;")})">
                            <div class="video-container">
                                <iframe src="${
                                  item.url
                                }" allowfullscreen></iframe>
                            </div>
                            <div class="p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-semibold text-blue-600">${
                                      commodityNames[item.commodity]
                                    }</span>
                                    <span class="text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full">ğŸ“¹ Video</span>
                                </div>
                                <h3 class="text-sm font-medium text-gray-800 mb-1 line-clamp-2">${
                                  item.title
                                }</h3>
                                <p class="text-sm text-gray-600">${formatDate(
                                  item.date
                                )}</p>
                                <p class="text-xs text-gray-400 mt-1">${
                                  item.file
                                }</p>
                                <div class="mt-2 text-xs text-blue-600 font-medium">ğŸ‘† Klik untuk detail lengkap</div>
                            </div>
                        </div>
                    `;
            } else {
              return `
                        <div class="media-item bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer" onclick="showModal(${JSON.stringify(
                          item
                        ).replace(/"/g, "&quot;")})">
                            <div class="aspect-w-4 aspect-h-3">
                                <img src="${item.url}" alt="Dokumentasi ${
                commodityNames[item.commodity]
              } - ${item.date}" 
                                     class="w-full h-48 object-cover" 
                                     onerror="this.src=''; this.alt='Gambar gagal dimuat'; this.style.display='none';">
                            </div>
                            <div class="p-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-semibold text-green-600">${
                                      commodityNames[item.commodity]
                                    }</span>
                                    <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full">ğŸ“· Foto</span>
                                </div>
                                <h3 class="text-sm font-medium text-gray-800 mb-1 line-clamp-2">${
                                  item.title
                                }</h3>
                                <p class="text-sm text-gray-600">${formatDate(
                                  item.date
                                )}</p>
                                <p class="text-xs text-gray-400 mt-1">${
                                  item.file
                                }</p>
                                <div class="mt-2 text-xs text-green-600 font-medium">ğŸ‘† Klik untuk detail lengkap</div>
                            </div>
                        </div>
                    `;
            }
          })
          .join("");
      }

      function updateFilterButtons() {
        // Update commodity buttons
        document.querySelectorAll('[id^="commodity-"]').forEach((btn) => {
          const commodity = btn.id.replace("commodity-", "");
          if (commodity === currentCommodity) {
            btn.className =
              "filter-button px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 active";
          } else {
            btn.className =
              "filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300";
          }
        });

        // Update period buttons
        document.querySelectorAll('[id^="period-"]').forEach((btn) => {
          const period = btn.id.replace("period-", "");
          if (period === currentPeriod) {
            btn.className =
              "filter-button px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 active";
          } else {
            btn.className =
              "filter-button px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300";
          }
        });
      }

      // Event listeners
      document.addEventListener("DOMContentLoaded", function () {
        // Commodity filter buttons
        document.querySelectorAll('[id^="commodity-"]').forEach((btn) => {
          btn.addEventListener("click", function () {
            currentCommodity = this.id.replace("commodity-", "");
            updateFilterButtons();
            renderMedia();
          });
        });

        // Period filter buttons
        document.querySelectorAll('[id^="period-"]').forEach((btn) => {
          btn.addEventListener("click", function () {
            currentPeriod = this.id.replace("period-", "");
            currentNavigation = null;
            updateFilterButtons();
            updateNavigation();
            renderMedia();
          });
        });

        // Date filter inputs
        document
          .getElementById("date-from")
          .addEventListener("change", function () {
            dateFrom = this.value;
            renderMedia();
          });

        document
          .getElementById("date-to")
          .addEventListener("change", function () {
            dateTo = this.value;
            renderMedia();
          });

        document
          .getElementById("clear-date")
          .addEventListener("click", function () {
            document.getElementById("date-from").value = "";
            document.getElementById("date-to").value = "";
            dateFrom = null;
            dateTo = null;
            renderMedia();
          });

        // Modal event listeners
        document
          .getElementById("close-modal")
          .addEventListener("click", closeModal);
        document
          .getElementById("modal-overlay")
          .addEventListener("click", function (e) {
            if (e.target === this) {
              closeModal();
            }
          });

        // Keyboard event for modal
        document.addEventListener("keydown", function (e) {
          if (e.key === "Escape") {
            closeModal();
          }
        });

        // Initial render
        updateFilterButtons();
        updateNavigation();
        renderMedia();
      });
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'9985ee8d05f881a2',t:'MTc2MjExMDYyNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
