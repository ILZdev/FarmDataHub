<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Iluze Agritech - Dashboard Investor Bawang Merah</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
        margin: 0;
        padding: 0;
        background: linear-gradient(135deg, #f8fffe 0%, #f0f9f4 100%);
        color: #2d3748;
        line-height: 1.6;
      }

      /* Navigation */
      .navbar {
        background: white;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .nav-container {
        max-width: 1200px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
      }

      .logo {
        font-size: 1.5rem;
        font-weight: 700;
        color: #2f855a;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .nav-menu {
        display: flex;
        list-style: none;
        margin: 0;
        padding: 0;
        gap: 30px;
      }

      .nav-item {
        cursor: pointer;
        padding: 10px 15px;
        border-radius: 8px;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .nav-item:hover,
      .nav-item.active {
        background: #e6fffa;
        color: #2f855a;
      }

      .mobile-menu-btn {
        display: none;
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
      }

      /* Container */
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      /* Page Sections */
      .page {
        display: none;
      }

      .page.active {
        display: block;
      }

      /* Countdown Section */
      .countdown-hero {
        background: linear-gradient(135deg, #68d391 0%, #48bb78 100%);
        color: white;
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        margin-bottom: 30px;
        box-shadow: 0 8px 30px rgba(72, 187, 120, 0.3);
      }

      .countdown-title {
        font-size: 1.8rem;
        font-weight: 600;
        margin-bottom: 20px;
      }

      .countdown-timer {
        display: flex;
        justify-content: center;
        gap: 25px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }

      .countdown-item {
        background: rgba(255, 255, 255, 0.2);
        padding: 20px 25px;
        border-radius: 15px;
        text-align: center;
        min-width: 90px;
      }

      .countdown-number {
        font-size: 2.5rem;
        font-weight: 700;
        display: block;
      }

      .countdown-label {
        font-size: 1rem;
        opacity: 0.9;
      }

      /* Stats Grid */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin-bottom: 30px;
      }

      .stat-card {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        text-align: center;
        transition: transform 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-5px);
      }

      .stat-icon {
        font-size: 3rem;
        margin-bottom: 15px;
      }

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: #2f855a;
        margin-bottom: 5px;
      }

      .stat-label {
        color: #718096;
        font-size: 1rem;
        font-weight: 500;
      }

      /* Quick Actions */
      .quick-actions {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .action-btn {
        background: white;
        border: 2px solid #e2e8f0;
        padding: 20px;
        border-radius: 12px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .action-btn:hover {
        border-color: #48bb78;
        background: #f0fff4;
        transform: translateY(-2px);
      }

      /* CTA Section */
      .cta-section {
        background: linear-gradient(135deg, #f6e05e 0%, #ecc94b 100%);
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        margin-bottom: 30px;
        box-shadow: 0 4px 20px rgba(236, 201, 75, 0.3);
      }

      .cta-title {
        font-size: 2rem;
        font-weight: 700;
        color: #744210;
        margin-bottom: 10px;
      }

      .cta-text {
        font-size: 1.2rem;
        color: #975a16;
        margin-bottom: 25px;
      }

      .cta-button {
        background: linear-gradient(135deg, #2f855a 0%, #276749 100%);
        color: white;
        padding: 18px 35px;
        border: none;
        border-radius: 12px;
        font-size: 1.2rem;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .cta-button:hover {
        transform: translateY(-3px);
      }

      /* Table Styles */
      .table-container {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .table-header {
        background: #f7fafc;
        padding: 20px;
        border-bottom: 1px solid #e2e8f0;
      }

      .table-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #2d3748;
        margin: 0;
      }

      table {
        width: 100%;
        border-collapse: collapse;
      }

      th,
      td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #e2e8f0;
      }

      th {
        background: #f7fafc;
        font-weight: 600;
        color: #4a5568;
      }

      tr:hover {
        background: #f7fafc;
      }

      /* Chart Container */
      .chart-container {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .chart-title {
        font-size: 1.5rem;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 20px;
        text-align: center;
      }

      /* Progress Bar */
      .progress-section {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .progress-title {
        font-size: 1.3rem;
        font-weight: 600;
        color: #2d3748;
        margin-bottom: 15px;
      }

      .progress-bar {
        width: 100%;
        height: 25px;
        background: #e2e8f0;
        border-radius: 12px;
        overflow: hidden;
        margin-bottom: 10px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #48bb78, #38a169);
        border-radius: 12px;
        transition: width 0.5s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: 600;
      }

      /* Profit Section */
      .profit-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .profit-card {
        background: white;
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        text-align: center;
      }

      .profit-amount {
        font-size: 1.8rem;
        font-weight: 700;
        color: #2f855a;
        margin-bottom: 8px;
      }

      .profit-label {
        color: #718096;
        font-size: 1rem;
      }

      /* About Section */
      .about-content {
        background: white;
        padding: 40px;
        border-radius: 15px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .about-title {
        font-size: 2rem;
        font-weight: 700;
        color: #2f855a;
        margin-bottom: 20px;
      }

      .about-text {
        font-size: 1.1rem;
        line-height: 1.8;
        color: #4a5568;
        margin-bottom: 25px;
      }

      .contact-info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }

      .contact-item {
        background: #f7fafc;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
      }

      .contact-icon {
        font-size: 2rem;
        margin-bottom: 10px;
      }

      /* Footer */
      .footer {
        background: #2d3748;
        color: white;
        text-align: center;
        padding: 20px;
        margin-top: 50px;
      }

      /* Export Button */
      .export-btn {
        background: #4299e1;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        margin-bottom: 20px;
      }

      .export-btn:hover {
        background: #3182ce;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .nav-menu {
          display: none;
          position: absolute;
          top: 100%;
          left: 0;
          right: 0;
          background: white;
          flex-direction: column;
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
          padding: 20px;
          gap: 10px;
        }

        .nav-menu.active {
          display: flex;
        }

        .mobile-menu-btn {
          display: block;
        }

        .countdown-timer {
          gap: 15px;
        }

        .countdown-item {
          padding: 15px 20px;
          min-width: 70px;
        }

        .countdown-number {
          font-size: 2rem;
        }

        .stats-grid {
          grid-template-columns: 1fr;
        }

        .container {
          padding: 15px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="logo">üßÖ Iluze Agritech</div>
        <ul class="nav-menu" id="navMenu">
          <li class="nav-item active" onclick="showPage('home')">Beranda</li>
          <li class="nav-item" onclick="showPage('investment')">
            Data Investasi
          </li>
          <li class="nav-item" onclick="showPage('growth')">
            Pertumbuhan & Panen
          </li>
          <li class="nav-item" onclick="showPage('profit')">
            Proyeksi Keuntungan
          </li>
          <li class="nav-item" onclick="showPage('about')">Tentang Proyek</li>
        </ul>
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
      </div>
    </nav>

    <div class="container">
      <!-- HOME PAGE -->
      <div id="home" class="page active">
        <div class="countdown-hero">
          <div class="countdown-title">‚è∞ Waktu menuju panen berikutnya:</div>
          <div class="countdown-timer" id="countdown">
            <div class="countdown-item">
              <span class="countdown-number" id="days">0</span>
              <span class="countdown-label">Hari</span>
            </div>
            <div class="countdown-item">
              <span class="countdown-number" id="hours">0</span>
              <span class="countdown-label">Jam</span>
            </div>
            <div class="countdown-item">
              <span class="countdown-number" id="minutes">0</span>
              <span class="countdown-label">Menit</span>
            </div>
            <div class="countdown-item">
              <span class="countdown-number" id="seconds">0</span>
              <span class="countdown-label">Detik</span>
            </div>
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">üë•</div>
            <div class="stat-value">14</div>
            <div class="stat-label">Investor Aktif</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üí∞</div>
            <div class="stat-value">Rp 120M</div>
            <div class="stat-label">Total Modal</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üåæ</div>
            <div class="stat-value">2.5 Ha</div>
            <div class="stat-label">Total Lahan Aktif</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">üì¶</div>
            <div class="stat-value">3,500 kg</div>
            <div class="stat-label">Estimasi Hasil Panen</div>
          </div>
        </div>

        <div class="quick-actions">
          <div class="action-btn" onclick="showPage('investment')">
            üìä Lihat Data Investasi
          </div>
          <div class="action-btn" onclick="showPage('growth')">
            üìà Pantau Pertumbuhan
          </div>
          <div class="action-btn" onclick="showPage('profit')">
            üíπ Cek Proyeksi Keuntungan
          </div>
          <div class="action-btn" onclick="showPage('about')">
            ‚ÑπÔ∏è Info Proyek
          </div>
        </div>

        <div class="cta-section">
          <h3 class="cta-title">üöÄ Kesempatan Investasi Terbatas!</h3>
          <p class="cta-text">
            Gabung sekarang sebelum masa tanam berikutnya dimulai!
          </p>
          <button class="cta-button" onclick="showInvestmentModal()">
            Mulai Investasi Sekarang
          </button>
        </div>
      </div>

      <!-- INVESTMENT DATA PAGE -->
      <div id="investment" class="page">
        <button class="export-btn" onclick="exportToCSV()">
          üì• Export to CSV
        </button>

        <div class="table-container">
          <div class="table-header">
            <h3 class="table-title">üìã Daftar Investor</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Nama Investor</th>
                <th>Jumlah Investasi</th>
                <th>Tanggal Bergabung</th>
                <th>Persentase Bagi Hasil</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Ahmad Wijaya</td>
                <td>Rp 15,000,000</td>
                <td>15 Jan 2025</td>
                <td>12.5%</td>
              </tr>
              <tr>
                <td>Siti Nurhaliza</td>
                <td>Rp 10,000,000</td>
                <td>18 Jan 2025</td>
                <td>8.3%</td>
              </tr>
              <tr>
                <td>Budi Santoso</td>
                <td>Rp 20,000,000</td>
                <td>20 Jan 2025</td>
                <td>16.7%</td>
              </tr>
              <tr>
                <td>Maya Sari</td>
                <td>Rp 8,000,000</td>
                <td>22 Jan 2025</td>
                <td>6.7%</td>
              </tr>
              <tr>
                <td>Rizki Pratama</td>
                <td>Rp 12,000,000</td>
                <td>25 Jan 2025</td>
                <td>10.0%</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="chart-container">
          <h3 class="chart-title">üìä Total Modal Masuk per Bulan</h3>
          <canvas id="investmentChart"></canvas>
        </div>
      </div>

      <!-- GROWTH & HARVEST PAGE -->
      <div id="growth" class="page">
        <div class="progress-section">
          <h3 class="progress-title">üå± Tingkat Pertumbuhan Tanaman</h3>
          <div class="progress-bar">
            <div class="progress-fill" style="width: 70%">70% Menuju Panen</div>
          </div>
          <p style="color: #718096; margin-top: 10px">
            Estimasi waktu panen: 45 hari lagi
          </p>
        </div>

        <div class="chart-container">
          <h3 class="chart-title">üìà Perkembangan Hasil Panen per Minggu</h3>
          <canvas id="harvestChart"></canvas>
        </div>

        <div class="table-container">
          <div class="table-header">
            <h3 class="table-title">üìã Ringkasan Hasil Panen Sebelumnya</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Periode Panen</th>
                <th>Total Hasil (kg)</th>
                <th>Kualitas</th>
                <th>Harga Jual/kg</th>
                <th>Total Pendapatan</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Juli 2024</td>
                <td>3,400 kg</td>
                <td>Grade A</td>
                <td>Rp 45,000</td>
                <td>Rp 153,000,000</td>
              </tr>
              <tr>
                <td>April 2024</td>
                <td>3,200 kg</td>
                <td>Grade A</td>
                <td>Rp 42,000</td>
                <td>Rp 134,400,000</td>
              </tr>
              <tr>
                <td>Januari 2024</td>
                <td>2,800 kg</td>
                <td>Grade B</td>
                <td>Rp 38,000</td>
                <td>Rp 106,400,000</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- PROFIT PROJECTION PAGE -->
      <div id="profit" class="page">
        <div class="profit-grid">
          <div class="profit-card">
            <div class="profit-amount">Rp 165M</div>
            <div class="profit-label">Total Estimasi Pendapatan</div>
          </div>
          <div class="profit-card">
            <div class="profit-amount">Rp 120M</div>
            <div class="profit-label">Total Modal</div>
          </div>
          <div class="profit-card">
            <div class="profit-amount">Rp 45M</div>
            <div class="profit-label">Estimasi Profit Bersih</div>
          </div>
          <div class="profit-card">
            <div class="profit-amount">37.5%</div>
            <div class="profit-label">ROI Estimasi</div>
          </div>
        </div>

        <div class="chart-container">
          <h3 class="chart-title">ü•ß Pembagian Hasil Keuntungan</h3>
          <canvas id="profitChart"></canvas>
        </div>

        <div class="table-container">
          <div class="table-header">
            <h3 class="table-title">üí∞ Detail Pembagian Keuntungan</h3>
          </div>
          <table>
            <thead>
              <tr>
                <th>Kategori</th>
                <th>Persentase</th>
                <th>Jumlah (Rp)</th>
                <th>Keterangan</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Investor</td>
                <td>60%</td>
                <td>Rp 27,000,000</td>
                <td>Dibagi sesuai proporsi investasi</td>
              </tr>
              <tr>
                <td>Petani</td>
                <td>25%</td>
                <td>Rp 11,250,000</td>
                <td>Upah pengelolaan lahan</td>
              </tr>
              <tr>
                <td>Operasional</td>
                <td>15%</td>
                <td>Rp 6,750,000</td>
                <td>Biaya operasional & manajemen</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- ABOUT PAGE -->
      <div id="about" class="page">
        <div class="about-content">
          <h2 class="about-title">üåæ Tentang Program Pertanian Bawang Merah</h2>
          <p class="about-text">
            Iluze Agritech adalah platform investasi pertanian yang
            menghubungkan investor dengan petani bawang merah berpengalaman.
            Kami menggunakan teknologi modern dan metode pertanian berkelanjutan
            untuk menghasilkan bawang merah berkualitas tinggi dengan sistem
            bagi hasil yang transparan dan menguntungkan.
          </p>
          <p class="about-text">
            <strong>Lokasi Lahan:</strong> Brebes, Jawa Tengah - dikenal sebagai
            sentra bawang merah terbesar di Indonesia.<br />
            <strong>Metode Tanam:</strong> Sistem tanam modern dengan rotasi
            tanaman dan pupuk organik.<br />
            <strong>Sistem Pengairan:</strong> Irigasi tetes (drip irrigation)
            untuk efisiensi air dan nutrisi.<br />
            <strong>Manajemen:</strong> Tim ahli pertanian dengan pengalaman 15+
            tahun di bidang hortikultura.
          </p>

          <div class="contact-info">
            <div class="contact-item">
              <div class="contact-icon">üìû</div>
              <h4>Telepon</h4>
              <p>+62 812-3456-7890</p>
            </div>
            <div class="contact-item">
              <div class="contact-icon">üìß</div>
              <h4>Email</h4>
              <p>info@iluzeagritech.com</p>
            </div>
            <div class="contact-item">
              <div class="contact-icon">üìç</div>
              <h4>Alamat</h4>
              <p>Jl. Pertanian No. 123<br />Brebes, Jawa Tengah</p>
            </div>
            <div class="contact-item">
              <div class="contact-icon">üåê</div>
              <h4>Media Sosial</h4>
              <p>@iluzeagritech<br />Instagram & Facebook</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <p>¬© 2025 Iluze Agritech. Semua hak dilindungi undang-undang.</p>
    </footer>

    <script>
      // UBAH TANGGAL PANEN DI SINI (format: YYYY-MM-DD HH:MM:SS)
      const harvestDate = new Date("2025-03-15 08:00:00").getTime();

      // Navigation Functions
      function showPage(pageId) {
        // Hide all pages
        const pages = document.querySelectorAll(".page");
        pages.forEach((page) => page.classList.remove("active"));

        // Show selected page
        document.getElementById(pageId).classList.add("active");

        // Update navigation
        const navItems = document.querySelectorAll(".nav-item");
        navItems.forEach((item) => item.classList.remove("active"));
        event.target.classList.add("active");

        // Close mobile menu
        document.getElementById("navMenu").classList.remove("active");

        // Initialize charts when needed
        if (pageId === "investment") {
          setTimeout(initInvestmentChart, 100);
        } else if (pageId === "growth") {
          setTimeout(initHarvestChart, 100);
        } else if (pageId === "profit") {
          setTimeout(initProfitChart, 100);
        }
      }

      function toggleMobileMenu() {
        document.getElementById("navMenu").classList.toggle("active");
      }

      // Countdown Function
      function updateCountdown() {
        const now = new Date().getTime();
        const distance = harvestDate - now;

        if (distance > 0) {
          const days = Math.floor(distance / (1000 * 60 * 60 * 24));
          const hours = Math.floor(
            (distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
          );
          const minutes = Math.floor(
            (distance % (1000 * 60 * 60)) / (1000 * 60)
          );
          const seconds = Math.floor((distance % (1000 * 60)) / 1000);

          document.getElementById("days").textContent = days;
          document.getElementById("hours").textContent = hours;
          document.getElementById("minutes").textContent = minutes;
          document.getElementById("seconds").textContent = seconds;
        } else {
          document.getElementById("countdown").innerHTML =
            '<div class="countdown-item"><span class="countdown-number">üéâ</span><span class="countdown-label">Waktu Panen!</span></div>';
        }
      }

      // Chart Initialization Functions
      let investmentChart, harvestChart, profitChart;

      function initInvestmentChart() {
        if (investmentChart) investmentChart.destroy();

        const ctx = document.getElementById("investmentChart").getContext("2d");
        investmentChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["Oktober", "November", "Desember", "Januari", "Februari"],
            datasets: [
              {
                label: "Modal Masuk (Juta Rupiah)",
                data: [25, 35, 30, 20, 10],
                backgroundColor: "rgba(72, 187, 120, 0.8)",
                borderColor: "#48bb78",
                borderWidth: 2,
                borderRadius: 8,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value) {
                    return "Rp " + value + "M";
                  },
                },
              },
            },
          },
        });

        document.getElementById("investmentChart").style.height = "300px";
      }

      function initHarvestChart() {
        if (harvestChart) harvestChart.destroy();

        const ctx = document.getElementById("harvestChart").getContext("2d");
        harvestChart = new Chart(ctx, {
          type: "line",
          data: {
            labels: [
              "Minggu 1",
              "Minggu 2",
              "Minggu 3",
              "Minggu 4",
              "Minggu 5",
              "Minggu 6",
              "Minggu 7",
              "Minggu 8",
            ],
            datasets: [
              {
                label: "Hasil Panen (kg)",
                data: [0, 0, 80, 200, 450, 750, 1200, 1800],
                borderColor: "#48bb78",
                backgroundColor: "rgba(72, 187, 120, 0.1)",
                borderWidth: 3,
                fill: true,
                tension: 0.4,
                pointBackgroundColor: "#48bb78",
                pointBorderColor: "#ffffff",
                pointBorderWidth: 2,
                pointRadius: 6,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              },
            },
            scales: {
              y: {
                beginAtZero: true,
                ticks: {
                  callback: function (value) {
                    return value + " kg";
                  },
                },
              },
            },
          },
        });

        document.getElementById("harvestChart").style.height = "300px";
      }

      function initProfitChart() {
        if (profitChart) profitChart.destroy();

        const ctx = document.getElementById("profitChart").getContext("2d");
        profitChart = new Chart(ctx, {
          type: "doughnut",
          data: {
            labels: ["Investor (60%)", "Petani (25%)", "Operasional (15%)"],
            datasets: [
              {
                data: [60, 25, 15],
                backgroundColor: ["#4299e1", "#48bb78", "#ed8936"],
                borderWidth: 0,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                position: "bottom",
                labels: {
                  padding: 20,
                  font: {
                    size: 14,
                  },
                },
              },
            },
          },
        });

        document.getElementById("profitChart").style.height = "300px";
      }

      // Export Function
      function exportToCSV() {
        const csvContent = `Nama Investor,Jumlah Investasi,Tanggal Bergabung,Persentase Bagi Hasil
Ahmad Wijaya,Rp 15000000,15 Jan 2025,12.5%
Siti Nurhaliza,Rp 10000000,18 Jan 2025,8.3%
Budi Santoso,Rp 20000000,20 Jan 2025,16.7%
Maya Sari,Rp 8000000,22 Jan 2025,6.7%
Rizki Pratama,Rp 12000000,25 Jan 2025,10.0%`;

        const blob = new Blob([csvContent], { type: "text/csv" });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "data_investor.csv";
        a.click();
        window.URL.revokeObjectURL(url);
      }

      // Investment Modal
      function showInvestmentModal() {
        const modal = document.createElement("div");
        modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 1000;
            `;

        modal.innerHTML = `
                <div style="background: white; padding: 40px; border-radius: 20px; max-width: 500px; width: 90%; text-align: center;">
                    <h3 style="color: #2f855a; margin-bottom: 20px; font-size: 1.8rem;">üå± Terima Kasih atas Minat Anda!</h3>
                    <p style="color: #718096; margin-bottom: 25px; font-size: 1.1rem;">Hubungi tim kami untuk informasi investasi lebih lanjut dan proses pendaftaran.</p>
                    <div style="margin-bottom: 25px;">
                        <p style="margin: 10px 0;"><strong>üìû Telepon:</strong> +62 812-3456-7890</p>
                        <p style="margin: 10px 0;"><strong>üìß Email:</strong> info@iluzeagritech.com</p>
                        <p style="margin: 10px 0;"><strong>üí¨ WhatsApp:</strong> +62 812-3456-7890</p>
                    </div>
                    <button onclick="this.closest('div').parentElement.remove()" style="background: #48bb78; color: white; border: none; padding: 12px 25px; border-radius: 10px; cursor: pointer; font-size: 1rem; font-weight: 600;">Tutup</button>
                </div>
            `;

        modal.onclick = (e) => {
          if (e.target === modal) {
            document.body.removeChild(modal);
          }
        };

        document.body.appendChild(modal);
      }

      // Initialize
      setInterval(updateCountdown, 1000);
      updateCountdown();
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'9954333b26dcb5dc',t:'MTc2MTU4OTE1MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
