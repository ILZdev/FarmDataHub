<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dokumentasi Pertumbuhan Tanaman</title>
    <script src="/_sdk/element_sdk.js"></script>
    <style>
      body {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #f0f8f0 0%, #e8f5e8 100%);
        min-height: 100%;
        color: #2d5016;
      }

      html {
        height: 100%;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 2rem;
      }

      .header {
        text-align: center;
        margin-bottom: 3rem;
      }

      .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        color: #2d5016;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(45, 80, 22, 0.1);
      }

      .page-subtitle {
        font-size: 1.1rem;
        color: #5a7c47;
        margin-bottom: 0;
      }

      .navigation-section {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #e0f0e0;
      }

      .nav-group {
        margin-bottom: 2rem;
      }

      .nav-group:last-child {
        margin-bottom: 0;
      }

      .nav-title {
        font-size: 1.2rem;
        font-weight: 600;
        color: #2d5016;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .nav-icon {
        width: 20px;
        height: 20px;
        fill: #7cb342;
      }

      .plant-selector {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
        margin-bottom: 1.5rem;
      }

      .plant-btn {
        padding: 0.75rem 1.25rem;
        border: 2px solid #7cb342;
        background: white;
        color: #7cb342;
        border-radius: 25px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.3s ease;
        font-size: 0.95rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .plant-btn:hover {
        background: #f8fff8;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(124, 179, 66, 0.2);
      }

      .plant-btn.active {
        background: #7cb342;
        color: white;
        box-shadow: 0 4px 12px rgba(124, 179, 66, 0.3);
      }

      .timeline-container {
        background: #f8fff8;
        border-radius: 8px;
        padding: 1rem;
        border: 1px solid #e8f5e8;
      }

      .timeline-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1rem;
        flex-wrap: wrap;
        gap: 1rem;
      }

      .timeline-info {
        font-size: 0.9rem;
        color: #5a7c47;
        font-weight: 500;
      }

      .timeline-controls {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .timeline-nav-btn {
        width: 32px;
        height: 32px;
        border: 1px solid #7cb342;
        background: white;
        color: #7cb342;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        font-size: 1rem;
        font-weight: bold;
      }

      .timeline-nav-btn:hover:not(:disabled) {
        background: #7cb342;
        color: white;
      }

      .timeline-nav-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .timeline-scroll {
        overflow-x: auto;
        padding-bottom: 0.5rem;
      }

      .timeline-days {
        display: flex;
        gap: 0.5rem;
        min-width: max-content;
        padding: 0.5rem 0;
      }

      .day-btn {
        min-width: 70px;
        padding: 0.75rem;
        border: 2px solid #e0f0e0;
        background: white;
        color: #5a7c47;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.3s ease;
        font-size: 0.85rem;
        text-align: center;
        white-space: nowrap;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.25rem;
      }

      .day-btn:hover {
        border-color: #7cb342;
        background: #f8fff8;
      }

      .day-btn.active {
        background: #7cb342;
        color: white;
        border-color: #7cb342;
        box-shadow: 0 2px 8px rgba(124, 179, 66, 0.3);
      }

      .day-btn.has-media {
        border-color: #aed581;
        background: #f1f8e9;
      }

      .day-btn.has-media.active {
        background: #7cb342;
        color: white;
      }

      .day-number {
        font-weight: 600;
        font-size: 1rem;
      }

      .day-label {
        font-size: 0.7rem;
        opacity: 0.8;
      }

      .period-selector {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
      }

      .period-btn {
        padding: 0.5rem 1rem;
        border: 2px solid #7cb342;
        background: white;
        color: #7cb342;
        border-radius: 6px;
        cursor: pointer;
        font-weight: 500;
        transition: all 0.3s ease;
        font-size: 0.9rem;
      }

      .period-btn:hover {
        background: #f8fff8;
      }

      .period-btn.active {
        background: #7cb342;
        color: white;
      }

      .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-top: 2rem;
      }

      .media-card {
        background: white;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);
        transition: all 0.3s ease;
        border: 1px solid #e8f5e8;
        position: relative;
      }

      .media-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
      }

      .media-container {
        position: relative;
        width: 100%;
        height: 200px;
        overflow: hidden;
        background: #f8f8f8;
      }

      .media-item {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
      }

      .media-card:hover .media-item {
        transform: scale(1.05);
      }

      .video-indicator {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 0.8rem;
        display: flex;
        align-items: center;
        gap: 4px;
      }

      .play-icon {
        width: 0;
        height: 0;
        border-left: 6px solid white;
        border-top: 4px solid transparent;
        border-bottom: 4px solid transparent;
      }

      .card-info {
        padding: 1rem;
      }

      .commodity-name {
        font-size: 1.1rem;
        font-weight: 600;
        color: #2d5016;
        margin-bottom: 0.5rem;
        text-transform: capitalize;
      }

      .date-info {
        font-size: 0.9rem;
        color: #5a7c47;
        margin-bottom: 0.5rem;
      }

      .description-info {
        font-size: 0.85rem;
        color: #7a8471;
        margin-bottom: 0.5rem;
        font-style: italic;
      }

      .period-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        background: #e8f5e8;
        color: #2d5016;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
      }

      .no-media {
        text-align: center;
        padding: 3rem;
        color: #5a7c47;
        font-size: 1.1rem;
        grid-column: 1 / -1;
      }

      .loading {
        text-align: center;
        padding: 2rem;
        color: #5a7c47;
        grid-column: 1 / -1;
      }

      @media (max-width: 768px) {
        .container {
          padding: 1rem;
        }

        .page-title {
          font-size: 2rem;
        }

        .plant-selector {
          justify-content: center;
        }

        .timeline-header {
          flex-direction: column;
          align-items: stretch;
          text-align: center;
        }

        .gallery {
          grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
          gap: 1rem;
        }

        .day-btn {
          min-width: 60px;
          padding: 0.5rem;
        }
      }
    </style>
    <style>
      @view-transition {
        navigation: auto;
      }
    </style>
    <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
    <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
  </head>
  <body>
    <main class="container">
      <header class="header">
        <h1 class="page-title" id="pageTitle">
          Dokumentasi Pertumbuhan Tanaman
        </h1>
        <p class="page-subtitle" id="pageSubtitle">
          Lihat perkembangan setiap komoditas dari hari ke hari.
        </p>
      </header>
      <section class="navigation-section">
        <!-- Selector Tanaman -->
        <div class="nav-group">
          <h2 class="nav-title">
            <svg class="nav-icon" viewbox="0 0 24 24">
              <path
                d="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M12,4A1,1 0 0,0 11,5V11A1,1 0 0,0 12,12A1,1 0 0,0 13,11V5A1,1 0 0,0 12,4M12,15A1,1 0 0,1 13,16V22H11V16A1,1 0 0,1 12,15Z"
              />
            </svg>
            Pilih Tanaman
          </h2>
          <div class="plant-selector">
            <button class="plant-btn active" data-plant="timun">
              ü•í Timun
            </button>
            <button class="plant-btn" data-plant="bawang-merah">
              üßÖ Bawang Merah
            </button>
            <button class="plant-btn" data-plant="cabai">üå∂Ô∏è Cabai</button>
          </div>
        </div>
        <!-- Timeline Hari -->
        <div class="nav-group">
          <h2 class="nav-title">
            <svg class="nav-icon" viewbox="0 0 24 24">
              <path
                d="M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"
              />
            </svg>
            Timeline Pertumbuhan
          </h2>
          <div class="timeline-container">
            <div class="timeline-header">
              <div class="timeline-info">
                <span id="currentPlantName">Timun</span> -
                <span id="currentMonth">Januari 2025</span>
              </div>
              <div class="timeline-controls">
                <button
                  class="timeline-nav-btn"
                  id="prevWeek"
                  title="Minggu Sebelumnya"
                >
                  ‚Äπ
                </button>
                <span id="weekInfo">Minggu 3</span>
                <button
                  class="timeline-nav-btn"
                  id="nextWeek"
                  title="Minggu Berikutnya"
                >
                  ‚Ä∫
                </button>
              </div>
            </div>
            <div class="timeline-scroll">
              <div class="timeline-days" id="timelineDays">
                <!-- Days will be generated by JavaScript -->
              </div>
            </div>
          </div>
        </div>
        <!-- Filter Periode -->
        <div class="nav-group">
          <h2 class="nav-title">
            <svg class="nav-icon" viewbox="0 0 24 24">
              <path
                d="M12,2C13.1,2 14,2.9 14,4C14,5.1 13.1,6 12,6C10.9,6 10,5.1 10,4C10,2.9 10.9,2 12,2M21,9V7L15,1H5C3.89,1 3,1.89 3,3V21A2,2 0 0,0 5,23H19A2,2 0 0,0 21,21V9M19,9H14V4H5V21H19V9Z"
              />
            </svg>
            Tampilan Data
          </h2>
          <div class="period-selector">
            <button class="period-btn active" data-period="harian">
              Harian
            </button>
            <button class="period-btn" data-period="mingguan">Mingguan</button>
            <button class="period-btn" data-period="bulanan">Bulanan</button>
          </div>
        </div>
      </section>
      <section class="gallery" id="mediaGallery">
        <div class="loading">Memuat dokumentasi...</div>
      </section>
    </main>
    <script>
      // Konfigurasi default
      const defaultConfig = {
        page_title: "Dokumentasi Pertumbuhan Tanaman",
        page_subtitle: "Lihat perkembangan setiap komoditas dari hari ke hari.",
      };

      // Data contoh dokumentasi dengan timeline harian yang lebih detail
      const documentationData = {
        timun: {
          harian: [
            {
              filename: "2025-01-15_timun_hari1.jpg",
              type: "image",
              date: "2025-01-15",
              day: 1,
              description: "Penanaman bibit",
            },
            {
              filename: "2025-01-16_timun_hari2.jpg",
              type: "image",
              date: "2025-01-16",
              day: 2,
              description: "Tunas pertama",
            },
            {
              filename: "2025-01-17_timun_hari3.mp4",
              type: "video",
              date: "2025-01-17",
              day: 3,
              description: "Pertumbuhan daun",
            },
            {
              filename: "2025-01-18_timun_hari4.jpg",
              type: "image",
              date: "2025-01-18",
              day: 4,
              description: "Daun membesar",
            },
            {
              filename: "2025-01-19_timun_hari5.jpg",
              type: "image",
              date: "2025-01-19",
              day: 5,
              description: "Batang menguat",
            },
            {
              filename: "2025-01-21_timun_hari7.mp4",
              type: "video",
              date: "2025-01-21",
              day: 7,
              description: "Minggu pertama",
            },
            {
              filename: "2025-01-25_timun_hari11.jpg",
              type: "image",
              date: "2025-01-25",
              day: 11,
              description: "Sulur muncul",
            },
            {
              filename: "2025-01-28_timun_hari14.jpg",
              type: "image",
              date: "2025-01-28",
              day: 14,
              description: "Dua minggu",
            },
          ],
          mingguan: [
            {
              filename: "2025-01-week1_timun_progress.jpg",
              type: "image",
              date: "2025-01-21",
              week: 1,
              description: "Progress minggu 1",
            },
            {
              filename: "2025-01-week2_timun_bunga.mp4",
              type: "video",
              date: "2025-01-28",
              week: 2,
              description: "Bunga mulai muncul",
            },
          ],
          bulanan: [
            {
              filename: "2025-01_timun_overview.jpg",
              type: "image",
              date: "2025-01-31",
              month: 1,
              description: "Ringkasan bulan pertama",
            },
          ],
        },
        "bawang-merah": {
          harian: [
            {
              filename: "2025-01-15_bawang_hari1.jpg",
              type: "image",
              date: "2025-01-15",
              day: 1,
              description: "Penanaman umbi",
            },
            {
              filename: "2025-01-16_bawang_hari2.jpg",
              type: "image",
              date: "2025-01-16",
              day: 2,
              description: "Tunas hijau",
            },
            {
              filename: "2025-01-18_bawang_hari4.jpg",
              type: "image",
              date: "2025-01-18",
              day: 4,
              description: "Daun memanjang",
            },
            {
              filename: "2025-01-20_bawang_hari6.mp4",
              type: "video",
              date: "2025-01-20",
              day: 6,
              description: "Pertumbuhan pesat",
            },
            {
              filename: "2025-01-23_bawang_hari9.jpg",
              type: "image",
              date: "2025-01-23",
              day: 9,
              description: "Daun rimbun",
            },
          ],
          mingguan: [
            {
              filename: "2025-01-week1_bawang_tumbuh.mp4",
              type: "video",
              date: "2025-01-21",
              week: 1,
              description: "Pertumbuhan minggu 1",
            },
          ],
          bulanan: [
            {
              filename: "2025-01_bawang_panen.jpg",
              type: "image",
              date: "2025-01-31",
              month: 1,
              description: "Siap panen",
            },
          ],
        },
        cabai: {
          harian: [
            {
              filename: "2025-01-15_cabai_hari1.jpg",
              type: "image",
              date: "2025-01-15",
              day: 1,
              description: "Bibit muda",
            },
            {
              filename: "2025-01-17_cabai_hari3.mp4",
              type: "video",
              date: "2025-01-17",
              day: 3,
              description: "Daun sejati",
            },
            {
              filename: "2025-01-19_cabai_hari5.jpg",
              type: "image",
              date: "2025-01-19",
              day: 5,
              description: "Batang kokoh",
            },
            {
              filename: "2025-01-22_cabai_hari8.jpg",
              type: "image",
              date: "2025-01-22",
              day: 8,
              description: "Cabang muncul",
            },
            {
              filename: "2025-01-26_cabai_hari12.jpg",
              type: "image",
              date: "2025-01-26",
              day: 12,
              description: "Daun lebat",
            },
          ],
          mingguan: [
            {
              filename: "2025-01-week2_cabai_bunga.jpg",
              type: "image",
              date: "2025-01-28",
              week: 2,
              description: "Bunga bermunculan",
            },
          ],
          bulanan: [
            {
              filename: "2025-01_cabai_buah.jpg",
              type: "image",
              date: "2025-01-31",
              month: 1,
              description: "Buah pertama",
            },
          ],
        },
      };

      let currentPeriod = "harian";
      let currentPlant = "timun";
      let currentWeek = 3;
      let selectedDay = null;

      // Nama tanaman untuk display
      const plantNames = {
        timun: "Timun",
        "bawang-merah": "Bawang Merah",
        cabai: "Cabai",
      };

      // Fungsi untuk memformat tanggal
      function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString("id-ID", {
          day: "numeric",
          month: "long",
          year: "numeric",
        });
      }

      // Fungsi untuk generate timeline days
      function generateTimelineDays() {
        const container = document.getElementById("timelineDays");
        container.innerHTML = "";

        // Generate 30 hari untuk contoh
        const startDate = new Date("2025-01-15");
        const plantData = documentationData[currentPlant];
        const dailyData = plantData ? plantData.harian || [] : [];

        // Buat map untuk cek hari mana yang ada media
        const daysWithMedia = new Set();
        dailyData.forEach((item) => {
          if (item.day) {
            daysWithMedia.add(item.day);
          }
        });

        // Generate 21 hari (3 minggu)
        for (let i = 1; i <= 21; i++) {
          const dayBtn = document.createElement("button");
          dayBtn.className = "day-btn";
          dayBtn.dataset.day = i;

          if (daysWithMedia.has(i)) {
            dayBtn.classList.add("has-media");
          }

          if (selectedDay === i) {
            dayBtn.classList.add("active");
          }

          dayBtn.innerHTML = `
                    <div class="day-number">H${i}</div>
                    <div class="day-label">Hari ${i}</div>
                `;

          dayBtn.addEventListener("click", () => {
            selectedDay = i;
            updateTimelineDisplay();
            displayMedia(currentPeriod);
          });

          container.appendChild(dayBtn);
        }
      }

      // Fungsi untuk update tampilan timeline
      function updateTimelineDisplay() {
        // Update info tanaman dan bulan
        document.getElementById("currentPlantName").textContent =
          plantNames[currentPlant];
        document.getElementById("currentMonth").textContent = "Januari 2025";
        document.getElementById(
          "weekInfo"
        ).textContent = `Minggu ${currentWeek}`;

        // Update active day buttons
        document.querySelectorAll(".day-btn").forEach((btn) => {
          btn.classList.remove("active");
          if (parseInt(btn.dataset.day) === selectedDay) {
            btn.classList.add("active");
          }
        });
      }

      // Fungsi untuk membuat card media
      function createMediaCard(commodity, mediaItem, period) {
        const card = document.createElement("div");
        card.className = "media-card";

        const isVideo = mediaItem.type === "video";
        const mediaElement = isVideo ? "video" : "img";
        const mediaSrc = `/dokumentasi/${commodity}/${period}/${mediaItem.filename}`;

        let dayInfo = "";
        if (mediaItem.day) {
          dayInfo = `Hari ${mediaItem.day}`;
        } else if (mediaItem.week) {
          dayInfo = `Minggu ${mediaItem.week}`;
        } else if (mediaItem.month) {
          dayInfo = `Bulan ${mediaItem.month}`;
        }

        card.innerHTML = `
                <div class="media-container">
                    <${mediaElement} 
                        class="media-item" 
                        src="${mediaSrc}"
                        ${isVideo ? 'controls preload="metadata"' : ""}
                        alt="Dokumentasi ${commodity} - ${formatDate(
          mediaItem.date
        )}"
                        onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\\'display:flex;align-items:center;justify-content:center;height:100%;background:#f0f0f0;color:#666;\\'>Gambar tidak tersedia</div>'"
                    >
                    ${
                      isVideo
                        ? `<div class="video-indicator"><div class="play-icon"></div>Video</div>`
                        : ""
                    }
                </div>
                <div class="card-info">
                    <h3 class="commodity-name">${
                      plantNames[commodity] || commodity
                    }</h3>
                    <p class="date-info">${formatDate(mediaItem.date)} ${
          dayInfo ? `‚Ä¢ ${dayInfo}` : ""
        }</p>
                    ${
                      mediaItem.description
                        ? `<p class="description-info">${mediaItem.description}</p>`
                        : ""
                    }
                    <span class="period-badge">${
                      period.charAt(0).toUpperCase() + period.slice(1)
                    }</span>
                </div>
            `;

        return card;
      }

      // Fungsi untuk menampilkan media berdasarkan periode dan filter
      function displayMedia(period) {
        const gallery = document.getElementById("mediaGallery");
        gallery.innerHTML = "";

        let hasMedia = false;
        const plantData = documentationData[currentPlant];

        if (plantData && plantData[period]) {
          let mediaList = plantData[period];

          // Filter berdasarkan hari yang dipilih jika dalam mode harian
          if (period === "harian" && selectedDay !== null) {
            mediaList = mediaList.filter((item) => item.day === selectedDay);
          }

          mediaList.forEach((mediaItem) => {
            hasMedia = true;
            const card = createMediaCard(currentPlant, mediaItem, period);
            gallery.appendChild(card);
          });
        }

        if (!hasMedia) {
          const message =
            selectedDay !== null && period === "harian"
              ? `Belum ada dokumentasi untuk hari ${selectedDay}.`
              : "Belum ada dokumentasi untuk periode ini.";
          gallery.innerHTML = `<div class="no-media">${message}</div>`;
        }
      }

      // Event listener untuk selector tanaman
      function setupPlantSelector() {
        const plantButtons = document.querySelectorAll(".plant-btn");

        plantButtons.forEach((button) => {
          button.addEventListener("click", () => {
            // Remove active class from all buttons
            plantButtons.forEach((btn) => btn.classList.remove("active"));

            // Add active class to clicked button
            button.classList.add("active");

            // Update current plant
            currentPlant = button.dataset.plant;
            selectedDay = null; // Reset selected day

            // Update displays
            generateTimelineDays();
            updateTimelineDisplay();
            displayMedia(currentPeriod);
          });
        });
      }

      // Event listener untuk timeline navigation
      function setupTimelineNavigation() {
        const prevBtn = document.getElementById("prevWeek");
        const nextBtn = document.getElementById("nextWeek");

        prevBtn.addEventListener("click", () => {
          if (currentWeek > 1) {
            currentWeek--;
            updateTimelineDisplay();
          }
        });

        nextBtn.addEventListener("click", () => {
          if (currentWeek < 4) {
            currentWeek++;
            updateTimelineDisplay();
          }
        });
      }

      // Event listener untuk filter periode
      function setupPeriodFilter() {
        const periodButtons = document.querySelectorAll(".period-btn");

        periodButtons.forEach((button) => {
          button.addEventListener("click", () => {
            // Remove active class from all buttons
            periodButtons.forEach((btn) => btn.classList.remove("active"));

            // Add active class to clicked button
            button.classList.add("active");

            // Update current period
            currentPeriod = button.dataset.period;

            // Reset selected day if not in daily mode
            if (currentPeriod !== "harian") {
              selectedDay = null;
              updateTimelineDisplay();
            }

            // Display media for selected period
            displayMedia(currentPeriod);
          });
        });
      }

      // Fungsi untuk update UI berdasarkan config
      async function onConfigChange(config) {
        const pageTitle = document.getElementById("pageTitle");
        const pageSubtitle = document.getElementById("pageSubtitle");

        if (pageTitle) {
          pageTitle.textContent = config.page_title || defaultConfig.page_title;
        }
        if (pageSubtitle) {
          pageSubtitle.textContent =
            config.page_subtitle || defaultConfig.page_subtitle;
        }
      }

      // Fungsi untuk mapping capabilities
      function mapToCapabilities(config) {
        return {
          recolorables: [],
          borderables: [],
          fontEditable: undefined,
          fontSizeable: undefined,
        };
      }

      // Fungsi untuk mapping edit panel values
      function mapToEditPanelValues(config) {
        return new Map([
          ["page_title", config.page_title || defaultConfig.page_title],
          [
            "page_subtitle",
            config.page_subtitle || defaultConfig.page_subtitle,
          ],
        ]);
      }

      // Inisialisasi aplikasi
      function initApp() {
        setupPlantSelector();
        setupTimelineNavigation();
        setupPeriodFilter();
        generateTimelineDays();
        updateTimelineDisplay();
        displayMedia(currentPeriod);
      }

      // Inisialisasi Element SDK
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange,
          mapToCapabilities,
          mapToEditPanelValues,
        });
      }

      // Jalankan aplikasi setelah DOM loaded
      document.addEventListener("DOMContentLoaded", initApp);
    </script>
    <script>
      (function () {
        function c() {
          var b = a.contentDocument || a.contentWindow.document;
          if (b) {
            var d = b.createElement("script");
            d.innerHTML =
              "window.__CF$cv$params={r:'997e188c276c577a',t:'MTc2MjAyODQ1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
            b.getElementsByTagName("head")[0].appendChild(d);
          }
        }
        if (document.body) {
          var a = document.createElement("iframe");
          a.height = 1;
          a.width = 1;
          a.style.position = "absolute";
          a.style.top = 0;
          a.style.left = 0;
          a.style.border = "none";
          a.style.visibility = "hidden";
          document.body.appendChild(a);
          if ("loading" !== document.readyState) c();
          else if (window.addEventListener)
            document.addEventListener("DOMContentLoaded", c);
          else {
            var e = document.onreadystatechange || function () {};
            document.onreadystatechange = function (b) {
              e(b);
              "loading" !== document.readyState &&
                ((document.onreadystatechange = e), c());
            };
          }
        }
      })();
    </script>
  </body>
</html>
